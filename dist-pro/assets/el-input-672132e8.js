import{aS as e,y as a,L as t,c3 as n,r as o,G as l,M as s,bn as i,aP as r,J as u,I as p,ap as d,aE as c,an as f,Q as v,ba as m,d as y,ar as x,b3 as g,K as h,bk as b,c4 as w,c5 as S,a_ as k,aV as z,a2 as I,aG as C,z as F,b4 as E,o as $,c as B,U as P,F as V,n as M,a as _,O as N,f as R,i as j,w as A,W as O,X as T,au as H,e as K,aD as W,aw as L,ao as D,t as G,V as U,P as q,aq as J,$ as Q}from"./index-c0be9370.js";import{u as X,a as Y}from"./use-form-item-6cc63f21.js";import{a as Z,u as ee}from"./use-form-common-props-e7a4e719.js";const ae=()=>e&&/firefox/i.test(window.navigator.userAgent),te="update:modelValue",ne="change",oe="input",le=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),se=["class","style"],ie=/^on[A-Z]/,re=(e={})=>{const{excludeListeners:o=!1,excludeKeys:l}=e,s=a((()=>((null==l?void 0:l.value)||[]).concat(se))),i=t();return a(i?()=>{var e;return n(Object.entries(null==(e=i.proxy)?void 0:e.$attrs).filter((([e])=>!(s.value.includes(e)||o&&ie.test(e)))))}:()=>({}))};function ue(e,{afterFocus:a,beforeBlur:n,afterBlur:u}={}){const p=t(),{emit:d}=p,c=l(),f=o(!1);return s(c,(e=>{e&&e.setAttribute("tabindex","-1")})),i(c,"click",(()=>{var a;null==(a=e.value)||a.focus()})),{wrapperRef:c,isFocused:f,handleFocus:e=>{f.value||(f.value=!0,d("focus",e),null==a||a())},handleBlur:e=>{var a;!!r(n)&&n(e)||e.relatedTarget&&(null==(a=c.value)?void 0:a.contains(e.relatedTarget))||(f.value=!1,d("blur",e),null==u||u())}}}let pe;const de=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${ae()?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,ce=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function fe(e,a=1,t){var n;pe||(pe=document.createElement("textarea"),document.body.appendChild(pe));const{paddingSize:o,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),n=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),o=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ce.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:n,borderSize:o,boxSizing:t}}(e);pe.setAttribute("style",`${i};${de}`),pe.value=e.value||e.placeholder||"";let r=pe.scrollHeight;const p={};"border-box"===s?r+=l:"content-box"===s&&(r-=o),pe.value="";const d=pe.scrollHeight-o;if(u(a)){let e=d*a;"border-box"===s&&(e=e+o+l),r=Math.max(e,r),p.minHeight=`${e}px`}if(u(t)){let e=d*t;"border-box"===s&&(e=e+o+l),r=Math.min(e,r)}return p.height=`${r}px`,null==(n=pe.parentNode)||n.removeChild(pe),pe=void 0,p}const ve=p({id:{type:String,default:void 0},size:c,disabled:Boolean,modelValue:{type:f([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:f([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:v},prefixIcon:{type:v},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:f([Object,Array,String]),default:()=>m({})},autofocus:{type:Boolean,default:!1}}),me={[te]:e=>d(e),input:e=>d(e),change:e=>d(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ye=["role"],xe=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],ge=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],he=y({name:"ElInput",inheritAttrs:!1});const be=Q(q(y({...he,props:ve,emits:me,setup(t,{expose:n,emit:i}){const r=t,u=x(),p=g(),d=a((()=>{const e={};return"combobox"===r.containerRole&&(e["aria-haspopup"]=u["aria-haspopup"],e["aria-owns"]=u["aria-owns"],e["aria-expanded"]=u["aria-expanded"]),e})),c=a((()=>["textarea"===r.type?oe.b():ne.b(),ne.m(Q.value),ne.is("disabled",ae.value),ne.is("exceed",Ne.value),{[ne.b("group")]:p.prepend||p.append,[ne.bm("group","append")]:p.append,[ne.bm("group","prepend")]:p.prepend,[ne.m("prefix")]:p.prefix||r.prefixIcon,[ne.m("suffix")]:p.suffix||r.suffixIcon||r.clearable||r.showPassword,[ne.bm("suffix","password-clear")]:Pe.value&&Ve.value,[ne.b("hidden")]:"hidden"===r.type},u.class])),f=a((()=>[ne.e("wrapper"),ne.is("focus",we.value)])),v=re({excludeKeys:a((()=>Object.keys(d.value)))}),{form:m,formItem:y}=X(),{inputId:q}=Y(r,{formItemContext:y}),Q=Z(),ae=ee(),ne=h("input"),oe=h("textarea"),se=l(),ie=l(),pe=o(!1),de=o(!1),ce=o(!1),ve=o(),me=l(r.inputStyle),he=a((()=>se.value||ie.value)),{wrapperRef:be,isFocused:we,handleFocus:Se,handleBlur:ke}=ue(he,{afterBlur(){var e;r.validateEvent&&(null==(e=null==y?void 0:y.validate)||e.call(y,"blur").catch((e=>C())))}}),ze=a((()=>{var e;return null!=(e=null==m?void 0:m.statusIcon)&&e})),Ie=a((()=>(null==y?void 0:y.validateState)||"")),Ce=a((()=>Ie.value&&b[Ie.value])),Fe=a((()=>ce.value?w:S)),Ee=a((()=>[u.style])),$e=a((()=>[r.inputStyle,me.value,{resize:r.resize}])),Be=a((()=>k(r.modelValue)?"":String(r.modelValue))),Pe=a((()=>r.clearable&&!ae.value&&!r.readonly&&!!Be.value&&(we.value||pe.value))),Ve=a((()=>r.showPassword&&!ae.value&&!r.readonly&&!!Be.value&&(!!Be.value||we.value))),Me=a((()=>r.showWordLimit&&!!r.maxlength&&("text"===r.type||"textarea"===r.type)&&!ae.value&&!r.readonly&&!r.showPassword)),_e=a((()=>Be.value.length)),Ne=a((()=>!!Me.value&&_e.value>Number(r.maxlength))),Re=a((()=>!!p.suffix||!!r.suffixIcon||Pe.value||r.showPassword||Me.value||!!Ie.value&&ze.value)),[je,Ae]=function(e){const a=o();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:n,value:o}=e.value;if(null==t||null==n)return;const l=o.slice(0,Math.max(0,t)),s=o.slice(Math.max(0,n));a.value={selectionStart:t,selectionEnd:n,value:o,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:n,afterTxt:o,selectionStart:l}=a.value;if(null==n||null==o||null==l)return;let s=t.length;if(t.endsWith(o))s=t.length-o.length;else if(t.startsWith(n))s=n.length;else{const e=n[l-1],a=t.indexOf(e,l-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(se);z(ie,(e=>{if(Te(),!Me.value||"both"!==r.resize)return;const a=e[0],{width:t}=a.contentRect;ve.value={right:`calc(100% - ${t+15+6}px)`}}));const Oe=()=>{const{type:a,autosize:t}=r;if(e&&"textarea"===a&&ie.value)if(t){const e=J(t)?t.minRows:void 0,a=J(t)?t.maxRows:void 0,n=fe(ie.value,e,a);me.value={overflowY:"hidden",...n},I((()=>{ie.value.offsetHeight,me.value=n}))}else me.value={minHeight:fe(ie.value).minHeight}},Te=(e=>{let a=!1;return()=>{var t;if(a||!r.autosize)return;null===(null==(t=ie.value)?void 0:t.offsetParent)||(e(),a=!0)}})(Oe),He=()=>{const e=he.value,a=r.formatter?r.formatter(Be.value):Be.value;e&&e.value!==a&&(e.value=a)},Ke=async e=>{je();let{value:a}=e.target;r.formatter&&(a=r.parser?r.parser(a):a),de.value||(a!==Be.value?(i(te,a),i("input",a),await I(),He(),Ae()):He())},We=e=>{i("change",e.target.value)},Le=e=>{i("compositionstart",e),de.value=!0},De=e=>{var a;i("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,n=t[t.length-1]||"";de.value=!le(n)},Ge=e=>{i("compositionend",e),de.value&&(de.value=!1,Ke(e))},Ue=()=>{ce.value=!ce.value,qe()},qe=async()=>{var e;await I(),null==(e=he.value)||e.focus()},Je=e=>{pe.value=!1,i("mouseleave",e)},Qe=e=>{pe.value=!0,i("mouseenter",e)},Xe=e=>{i("keydown",e)},Ye=()=>{i(te,""),i("change",""),i("clear"),i("input","")};return s((()=>r.modelValue),(()=>{var e;I((()=>Oe())),r.validateEvent&&(null==(e=null==y?void 0:y.validate)||e.call(y,"change").catch((e=>C())))})),s(Be,(()=>He())),s((()=>r.type),(async()=>{await I(),He(),Oe()})),F((()=>{!r.formatter&&r.parser,He(),I(Oe)})),n({input:se,textarea:ie,ref:he,textareaStyle:$e,autosize:E(r,"autosize"),focus:qe,blur:()=>{var e;return null==(e=he.value)?void 0:e.blur()},select:()=>{var e;null==(e=he.value)||e.select()},clear:Ye,resizeTextarea:Oe}),(e,a)=>($(),B("div",H(_(d),{class:_(c),style:_(Ee),role:e.containerRole,onMouseenter:Qe,onMouseleave:Je}),[P(" input "),"textarea"!==e.type?($(),B(V,{key:0},[P(" prepend slot "),e.$slots.prepend?($(),B("div",{key:0,class:M(_(ne).be("group","prepend"))},[N(e.$slots,"prepend")],2)):P("v-if",!0),R("div",{ref_key:"wrapperRef",ref:be,class:M(_(f))},[P(" prefix slot "),e.$slots.prefix||e.prefixIcon?($(),B("span",{key:0,class:M(_(ne).e("prefix"))},[R("span",{class:M(_(ne).e("prefix-inner"))},[N(e.$slots,"prefix"),e.prefixIcon?($(),j(_(T),{key:0,class:M(_(ne).e("icon"))},{default:A((()=>[($(),j(O(e.prefixIcon)))])),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0),R("input",H({id:_(q),ref_key:"input",ref:se,class:_(ne).e("inner")},_(v),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?ce.value?"text":"password":e.type,disabled:_(ae),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,onCompositionstart:Le,onCompositionupdate:De,onCompositionend:Ge,onInput:Ke,onFocus:a[0]||(a[0]=(...e)=>_(Se)&&_(Se)(...e)),onBlur:a[1]||(a[1]=(...e)=>_(ke)&&_(ke)(...e)),onChange:We,onKeydown:Xe}),null,16,xe),P(" suffix slot "),_(Re)?($(),B("span",{key:1,class:M(_(ne).e("suffix"))},[R("span",{class:M(_(ne).e("suffix-inner"))},[_(Pe)&&_(Ve)&&_(Me)?P("v-if",!0):($(),B(V,{key:0},[N(e.$slots,"suffix"),e.suffixIcon?($(),j(_(T),{key:0,class:M(_(ne).e("icon"))},{default:A((()=>[($(),j(O(e.suffixIcon)))])),_:1},8,["class"])):P("v-if",!0)],64)),_(Pe)?($(),j(_(T),{key:1,class:M([_(ne).e("icon"),_(ne).e("clear")]),onMousedown:L(_(D),["prevent"]),onClick:Ye},{default:A((()=>[K(_(W))])),_:1},8,["class","onMousedown"])):P("v-if",!0),_(Ve)?($(),j(_(T),{key:2,class:M([_(ne).e("icon"),_(ne).e("password")]),onClick:Ue},{default:A((()=>[($(),j(O(_(Fe))))])),_:1},8,["class"])):P("v-if",!0),_(Me)?($(),B("span",{key:3,class:M(_(ne).e("count"))},[R("span",{class:M(_(ne).e("count-inner"))},G(_(_e))+" / "+G(e.maxlength),3)],2)):P("v-if",!0),_(Ie)&&_(Ce)&&_(ze)?($(),j(_(T),{key:4,class:M([_(ne).e("icon"),_(ne).e("validateIcon"),_(ne).is("loading","validating"===_(Ie))])},{default:A((()=>[($(),j(O(_(Ce))))])),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0)],2),P(" append slot "),e.$slots.append?($(),B("div",{key:1,class:M(_(ne).be("group","append"))},[N(e.$slots,"append")],2)):P("v-if",!0)],64)):($(),B(V,{key:1},[P(" textarea "),R("textarea",H({id:_(q),ref_key:"textarea",ref:ie,class:_(oe).e("inner")},_(v),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:_(ae),readonly:e.readonly,autocomplete:e.autocomplete,style:_($e),"aria-label":e.label,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,onCompositionstart:Le,onCompositionupdate:De,onCompositionend:Ge,onInput:Ke,onFocus:a[2]||(a[2]=(...e)=>_(Se)&&_(Se)(...e)),onBlur:a[3]||(a[3]=(...e)=>_(ke)&&_(ke)(...e)),onChange:We,onKeydown:Xe}),null,16,ge),_(Me)?($(),B("span",{key:0,style:U(ve.value),class:M(_(ne).e("count"))},G(_(_e))+" / "+G(e.maxlength),7)):P("v-if",!0)],64))],16,ye))}}),[["__file","input.vue"]]));export{ne as C,be as E,oe as I,te as U,ue as a,ae as b,le as i,re as u};
